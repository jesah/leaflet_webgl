!function t(r,e,i){function n(s,a){if(!e[s]){if(!r[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=e[s]={exports:{}};r[s][0].call(h.exports,function(t){var e=r[s][1][t];return n(e?e:t)},h,h.exports,t,r,e,i)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,r,e){"use strict";"undefined"!=typeof Worker&&null!==Worker||!console||console.log("Warning: Browser does not support web workers.");var i=t("./ThreadPool");"function"==typeof define?define([],function(){return i}):"object"==typeof r&&(r.exports=i),"object"==typeof window&&(window.ThreadPool=i)},{"./ThreadPool":4}],2:[function(t,r,e){"use strict";var i=t("./utils"),n=function(t,r,e){if(this.param=r,this.transferBuffers=e,this.importScripts=[],this.callbacksStart=[],this.callbacksDone=[],this.callbacksError=[],"function"==typeof t){var i=t.toString();this.scriptArgs=i.substring(i.indexOf("(")+1,i.indexOf(")")).split(","),this.scriptBody=i.substring(i.indexOf("{")+1,i.lastIndexOf("}")),this.scriptFile=void 0}else this.scriptArgs=void 0,this.scriptBody=void 0,this.scriptFile=t};n.prototype={getParameter:function(){return this.param},getImportScripts:function(){return this.importScripts},setImportScripts:function(t){this.importScripts=t},getBuffersToTransfer:function(){return this.transferBuffers},getFunction:function(){return this.scriptArgs?{args:this.scriptArgs,body:this.scriptBody}:void 0},getScriptFile:function(){return this.scriptFile},functionallyEquals:function(t){return t&&t instanceof n&&i.arrayEquals(t.scriptArgs,this.scriptArgs)&&t.body===this.body&&t.scriptFile===this.scriptFile},triggerStart:function(){i.callListeners(this.callbacksStart,[])},triggerDone:function(t){i.callListeners(this.callbacksDone,[t])},triggerError:function(t){i.callListeners(this.callbacksError,[t])},start:function(t){return i.addListener(this.callbacksStart,t),this},done:function(t){return i.addListener(this.callbacksDone,t),this},error:function(t){return i.addListener(this.callbacksError,t),this}},r.exports=n},{"./utils":6}],3:[function(t,r,e){"use strict";var i=t("./genericWorker"),n=i.dataUri,o=i.genericWorkerCode,s=function(t){this.threadPool=t,this.worker=void 0,this.currentJob=void 0,this.lastJob=void 0};s.prototype={terminate:function(){this.worker&&(this.worker.terminate(),this.worker=void 0)},run:function(t){function r(){s.currentJob=void 0,s.lastJob=t,s.threadPool.onThreadDone(s)}function e(t){s.currentJob.triggerDone(t.data),s.threadPool.triggerDone(t.data),r()}function i(t){s.currentJob.triggerError(t),s.threadPool.triggerError(t),r()}var s=this,a=!0,c=t.getBuffersToTransfer();if(this.currentJob=t,c||(c=[]),this.worker&&(this.lastJob&&this.lastJob.functionallyEquals(t)?a=!1:(this.worker.terminate(),this.worker=void 0)),t.triggerStart(),t.getScriptFile())a&&(this.worker=new Worker(t.getScriptFile()),this.worker.addEventListener("message",e,!1),this.worker.addEventListener("error",i,!1)),this.worker.postMessage(t.getParameter(),c);else{if(a){try{this.worker=new Worker(n)}catch(l){var h=window.navigator.userAgent.indexOf("MSIE ")>-1,f=window.navigator.userAgent.indexOf("Trident/")>-1;if(!h&&!f)throw l;if(!this.threadPool.evalWorkerUrl)throw new Error("No eval worker script set (required for IE compatibility).");this.worker=new Worker(this.threadPool.evalWorkerUrl),this.worker.postMessage(o)}this.worker.addEventListener("message",e,!1),this.worker.addEventListener("error",i,!1)}this.worker.postMessage({"function":t.getFunction(),importScripts:t.getImportScripts(),parameter:t.getParameter()},c)}}},r.exports=s},{"./genericWorker":5}],4:[function(t,r,e){"use strict";var i=t("./Job"),n=t("./Thread"),o=t("./utils"),s=function(t,r){t=t||s.defaultSize,r=r||"",this.size=t,this.evalWorkerUrl=r,this.pendingJobs=[],this.idleThreads=[],this.activeThreads=[],this.callbacksDone=[],this.callbacksError=[],this.callbacksAllDone=[];for(var e=0;t>e;e++)this.idleThreads.push(new n(this))};s.prototype={terminateAll:function(){for(var t=0;t<this.idleThreads.length;t++)this.idleThreads[t].terminate();for(t=0;t<this.activeThreads.length;t++)this.activeThreads[t]&&this.activeThreads[t].terminate()},run:function(){var t,r,e,n,s,a,c=this,l=[].slice.call(arguments);if(arguments.length<1)throw new Error("run(): Too few parameters.");if("string"==typeof l[0])t=l.shift();else{if("object"==typeof l[0]&&l[0]instanceof Array&&(e=l.shift()),!(l.length>0&&"function"==typeof l[0]))throw new Error("run(): Missing obligatory thread logic function.");r=l.shift()}if(l.length>0&&"function"!=typeof l[0]&&(n=l.shift()),l.length>0&&"function"!=typeof l[0]&&(s=l.shift()),l.length>0&&"function"==typeof l[0]&&(a=l.shift()),l.length>0)throw new Error("run(): Unrecognized parameters: "+l);var h;return t?h=new i(t,n,s):(h=new i(r,n,s),e&&e.length>0&&h.setImportScripts(e)),h.done(function(){c.jobIsDone(h)}),a&&h.done(a),this.pendingJobs.push(h),o.runDeferred(this.runJobs.bind(this)),h},runJobs:function(){if(this.idleThreads.length>0&&this.pendingJobs.length>0){var t=this.idleThreads.shift();this.activeThreads.push(t);var r=this.pendingJobs.shift();t.run(r)}},onThreadDone:function(t){this.idleThreads.unshift(t),this.activeThreads.splice(this.activeThreads.indexOf(t),1),this.runJobs()},triggerDone:function(t){o.callListeners(this.callbacksDone,[t])},triggerError:function(t){o.callListeners(this.callbacksError,[t])},clearDone:function(){this.callbacksDone=[]},jobIsDone:function(){0===this.pendingJobs.length&&(o.callListeners(this.callbacksAllDone,[]),this.callbacksAllDone=[])},done:function(t){return o.addListener(this.callbacksDone,t),this},error:function(t){return o.addListener(this.callbacksError,t),this},allDone:function(t){return o.addListener(this.callbacksAllDone,t),this}},s.defaultSize=8,r.exports=s},{"./Job":2,"./Thread":3,"./utils":6}],5:[function(t,r,e){"use strict";var i="this.onmessage = function (event) {  var fnData = event.data.function;  var scripts = event.data.importScripts;  var fn = Function.apply(null, fnData.args.concat(fnData.body));  if (importScripts && scripts.length > 0) {    importScripts.apply(null, scripts);  }  fn(event.data.parameter, function(result) {    postMessage(result);  });}",n="data:text/javascript;charset=utf-8,"+encodeURI(i),o=window.createBlobURL||window.createObjectURL;if(!o){var s=window.URL||window.webkitURL;if(!s)throw new Error("No Blob creation implementation found.");o=s.createObjectURL}if("function"==typeof BlobBuilder&&"function"==typeof o){var a=new BlobBuilder;a.append(i),n=o(a.getBlob())}else if("function"==typeof Blob&&"function"==typeof o){var c=new Blob([i],{type:"text/javascript"});n=o(c)}r.exports={dataUri:n,genericWorkerCode:i}},{}],6:[function(t,r,e){"use strict";function i(t,r){return!(r>t||t>r)}function n(t,r){if("function"!=typeof r)throw new Error("Expected callback function as parameter.");for(var e=0;e<t.length;e++){var i=t[e];if(i===r)return}t.push(r)}function o(t,r){for(var e=0;e<t.length;e++){var i=t[e];i.apply(null,r)}}function s(t){setTimeout(t,0)}r.exports={arrayEquals:i,addListener:n,callListeners:o,runDeferred:s}},{}]},{},[1]);